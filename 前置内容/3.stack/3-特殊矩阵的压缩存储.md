# 矩阵的压缩存储

### 数组的存储结构

#### 一维数组
![one-dimensional_array](../../img/one-dimensional_array.png)

#### 二维数组
![two-dimensional_array](../../img/two-dimensional_array.png)

M行N列的二维数组b[M][N]中，若按行优先存储，则b[i][j]的存储地址为 LOC+(i*N+j) * sizeof(ElemType)

M行N列的二维数组b[M][N]中，若按列优先存储，则b[i][j]的存储地址为 LOC+(i+j*M) * sizeof(ElemType)

---

### 普通矩阵
可以直接用二位数组存储

---

### 特殊矩阵
某些特殊的矩阵可以压缩存储空间  如下所示

#### 对称矩阵
n阶方正，任意一个元素 ai j 都有 aij = aji 

压缩策略：只存储主对角线或者 上/下 三角区中的一个

 - 主对角线+下三角区
可以按照行优先原则将各元素存入一维数组中

思考
1. 数组大小应该为多大？  1+2+3+...+n 等差数列
1. 站在程序员角度，对称矩阵压缩存储后如何方便使用？ 可以实现一个“映射函数”  矩阵下标 --> 一维数组下标  **重要**

aij (i>=j 时)是第几个元素？  第 i(i-1)/2 + j 个元素，然后因为下标减一  所以索引k为 i(i-1)/2 + j - 1 [如果索引下标从1开始，那就不用减这个1]

aij (i<j 时)是第几个元素？  第 j(j-1)/2 + i 个元素，然后因为下标减一  所以索引k为 j(j-1)/2 + i - 1 [如果索引下标从1开始，那就不用减这个1]

#### 三角矩阵
除了上/下三角区和主对角线外，其他的元素都相同

下三角矩阵：

压缩策略：按行有限原则将非常数区域元素存入一维数组中，并在最后一个位置存储常量c

i >= j 时 k = i(i-1)/2 + j - 1    || i < j 时  i < j 这个就是上三角区元素  k = i(i-1)/2 + j

#### 三对角矩阵
也就是带状矩阵，挨着主对角线的数字都为正常矩阵数，其他的全为0

即 |i-j| > 1 时， aij = 0

压缩策略：行优先原则，只存储带状部分

aij |i-j| <= 1, 前i-1 行共有 3(i-1) - 1 个元素，aij 是i行第 j - i + 2 个元素， aij就是 2i+j-2 个元素 k = 2i+j-2 - 1

如果已经知道k 如何推 i j，前i-1行3(i-1) - 1个元素，前i行有 3i-1 个元素 3(i-1) - 1 < k <= 3i-1,
i >= (k+2)/3  刚好大于等于，然后i只要对这个数向上取整就行了，得到i后 k = 2i+j-3 就可以算出j了

#### 稀疏矩阵
非零元素的个数远远少于矩阵的个数

压缩策略：
顺序存储 -- 三元组<行、列、值> (用一个struct i j v 进行顺序存储)

链式存储 -- 十字链表法
![shizilianbiaofa_xishujuzhen](../../img/shizilianbiaofa_xishujuzhen.png)